!function(){"use strict";class e{constructor(e,t,n){let{name:s,link:o}=e;this._name=s,this._link=o,this._templateSelector=t,this._handleCardClick=n}_getTemplate(){return document.querySelector(this._templateSelector).content.querySelector(".element").cloneNode(!0)}_handleImageClick(e){e.preventDefault(),this._handleCardClick(e.target.src,this._name)}_handleDeleteClick(){this._element.remove()}_handleLikeClick(e){e.preventDefault(),e.target.classList.toggle("element__like_active")}_setEventListeners(){this._imageElement.addEventListener("click",(e=>this._handleImageClick(e))),this._deleteElement.addEventListener("click",(e=>{e.preventDefault(),this._handleDeleteClick()})),this._likeElement.addEventListener("click",this._handleLikeClick)}getCard(){return this._element=this._getTemplate(),this._imageElement=this._element.querySelector(".element__image"),this._nameElement=this._element.querySelector(".element__box").querySelector(".element__name"),this._deleteElement=this._element.querySelector(".element__delete-button"),this._likeElement=this._element.querySelector(".element__like"),this._setEventListeners(),this._imageElement.src=this._link,this._imageElement.alt=this._name,this._nameElement.textContent=this._name,this._element}}class t{constructor(e,t){this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formElement=t,this._buttonElement=this._formElement.querySelector(this._submitButtonSelector)}_showInputError(e,t){this._errorElement=this._formElement.querySelector(".".concat(e.id,"-error")),this._errorElement.textContent=t,e.classList.add(this._inputErrorClass)}_hideInputError(e){this._errorElement=this._formElement.querySelector(".".concat(e.id,"-error")),this._errorElement.textContent="",e.classList.remove(this._inputErrorClass)}disableButton(){this._buttonElement.disabled=!0,this._buttonElement.classList.add(this._inactiveButtonClass)}_enableButton(){this._buttonElement.disabled=!1,this._buttonElement.classList.remove(this._inactiveButtonClass)}_checkIfValid(e){e.validity.valid?this._hideInputError(e):this._showInputError(e,e.validationMessage)}_checkIfFormValid(){return this._inputsList.every((e=>e.validity.valid&&""!==e.value))}_toggleSubmitBtnState(){this._checkIfFormValid()?this._enableButton():this.disableButton()}_setEventListeners(){this._inputsList=Array.from(this._formElement.querySelectorAll(this._inputSelector)),this._inputsList.forEach((e=>{e.addEventListener("input",(t=>{t.preventDefault(),this._toggleSubmitBtnState(),this._checkIfValid(e)}))}))}enableValidation(){this._formElement.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}}function n(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class s{constructor(e){n(this,"_handleEscClose",(e=>{"Escape"===e.key&&this.closePopup()})),n(this,"_handleOverlayClick",(e=>{e.target.classList.contains("popup")&&this.closePopup()})),this._popup=document.querySelector(e)}closePopup(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose),this._popup.removeEventListener("click",this._handleOverlayClick)}openPopup(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose),this._popup.addEventListener("click",this._handleOverlayClick)}_addCloseOnClickEvent(){this._closeBtn=this._popup.querySelector(".popup__close"),this._closeBtn.addEventListener("click",(e=>{e.preventDefault(),this.closePopup()}))}setEventListeners(){this._addCloseOnClickEvent()}}class o extends s{constructor(e,t){super(e),this._handleFormSubmit=t,this._form=this._popup.querySelector(".popup__form")}_getInputValues(){return this._inputList=this._popup.querySelectorAll(".popup__input"),this._formValues={},this._inputList.forEach((e=>{this._formValues[e.name]=e.value})),this._formValues}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues())}))}closePopup(){super.closePopup(),this._form.reset()}}const i=document.querySelector(".profile__edit-button"),r=document.querySelector(".profile__add-button"),l=document.querySelector(".popup__input_type_name"),a=document.querySelector(".popup__input_type_hobby"),p=document.querySelector(".popup__form_type_profile"),u=document.querySelector(".popup__form_type_card"),_=(document.querySelector(".profile__name"),document.querySelector(".profile__interest"),{formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__button",inactiveButtonClass:"popup__button_disabled",inputErrorClass:"popup__input_type_error",errorClass:"popup__error_visible"}),c=new class{constructor(e){let{userNameSelector:t,userJobSelector:n}=e;this._userName=document.querySelector(t),this._userJob=document.querySelector(n)}getUserInfo(){return{userName:this._userName.textContent,userJob:this._userJob.textContent}}setUserInfo(e,t){this._userName.textContent=e,this._userJob.textContent=t}}({userNameSelector:".profile__name",userJobSelector:".profile__interest"}),m=new class extends s{constructor(e){super(e)}closePopup(){super.closePopup()}openPopup(e,t){super.openPopup(),this._addImageAndCaption(e,t)}_addImageAndCaption(e,t){this._popupImageElement=document.querySelector(".popup__card-image"),this._popupNameElement=document.querySelector(".popup__name"),this._popupImageElement.src=e,this._popupImageElement.alt=t,this._popupNameElement.textContent=t}}(".popup_type_image");m.setEventListeners();const h=new class{constructor(e,t){let{items:n,renderer:s}=e;this._items=n,this._renderer=s,this._container=document.querySelector(t)}addItem(e){this._container.prepend(e)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}}({items:[{name:"Yosemite Valley",link:"https://code.s3.yandex.net/web-code/yosemite.jpg"},{name:"Lake Louise",link:"https://code.s3.yandex.net/web-code/lake-louise.jpg"},{name:"Bald Mountains",link:"https://code.s3.yandex.net/web-code/bald-mountains.jpg"},{name:"Latemar",link:"https://code.s3.yandex.net/web-code/latemar.jpg"},{name:"Vanoise National Park",link:"https://code.s3.yandex.net/web-code/vanoise.jpg"},{name:"Lago di Braies",link:"https://code.s3.yandex.net/web-code/lago.jpg"}],renderer:e=>{b(e)}},".elements");h.renderItems();const d=new o(".popup_type_card",(function(e){const{title:t,image_link:n}=e;d.closePopup(),b({name:t,link:n})}));d.setEventListeners();const E=new o(".popup_type_profile",(function(e){c.setUserInfo(e.name,e.hobby),E.closePopup()}));E.setEventListeners();const v=new t(_,u);function y(e,t){m.openPopup(e,t)}function b(t){const n=new e(t,"#element",y).getCard();h.addItem(n)}v.enableValidation(),new t(_,p).enableValidation(),r.addEventListener("click",(()=>{d.openPopup(),v.disableButton()})),i.addEventListener("click",(()=>{E.openPopup(),function(){const{userName:e,userJob:t}=c.getUserInfo();l.value=e,a.value=t}()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFXUyxJQUNUQyxFQUFXRCxLQUdmLGFBR0ZaLEVBQWdCVSxjQUdoQixNQUFNSSxFQUFZLElBQUk1QyxFQUFjLG9CQStCcEMsU0FBOEI2QyxHQUM1QixNQUFNLE1BQUVDLEVBQUYsV0FBU0MsR0FBZUYsRUFDOUJELEVBQVV0RCxhQUNWcUQsRUFBVyxDQUFFakksS0FBTW9JLEVBQU9uSSxLQUFNb0ksT0FqQ2xDSCxFQUFVN0Msb0JBR1YsTUFBTWlELEVBQWUsSUFBSWhELEVBQ3ZCLHVCQWlDRixTQUFpQzZDLEdBQy9CN0IsRUFBU1EsWUFBWXFCLEVBQUtuSSxLQUFNbUksRUFBS0ksT0FDckNELEVBQWExRCxnQkFoQ2YwRCxFQUFhakQsb0JBR2IsTUFBTW1ELEVBQW9CLElBQUl4RyxFQUFjQyxFQUFVb0UsR0FpQ3RELFNBQVN0RyxFQUFnQmlCLEVBQUtoQixHQUM1QmdILEVBQWU5QixVQUFVbEUsRUFBS2hCLEdBSWhDLFNBQVNpSSxFQUFXUSxHQUNsQixNQUNNQyxFQURPLElBQUk5SSxFQUFLNkksRUFBVSxXQUFZMUksR0FDbkI2QixVQUN6QndGLEVBQWdCTyxRQUFRZSxHQXhDMUJGLEVBQWtCaEUsbUJBR1csSUFBSXhDLEVBQWNDLEVBQVVtRSxHQUNwQzVCLG1CQUdyQnlCLEVBQWN4RSxpQkFBaUIsU0FBUyxLQUN0Q3lHLEVBQVVoRCxZQUNWc0QsRUFBa0JoRixtQkFJcEJ3QyxFQUFldkUsaUJBQWlCLFNBQVMsS0FDdkM2RyxFQUFhcEQsWUE4QmYsV0FDRSxNQUFNLFNBQUUwQixFQUFGLFFBQVlDLEdBQVlQLEVBQVNLLGNBQ3ZDVCxFQUFpQmhDLE1BQVEwQyxFQUN6QlQsRUFBa0JqQyxNQUFRMkMsRUFoQzFCOEIsTSIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3dlYl9wcm9qZWN0XzQvLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly93ZWJfcHJvamVjdF80Ly4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMiLCJ3ZWJwYWNrOi8vd2ViX3Byb2plY3RfNC8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IoeyBuYW1lLCBsaW5rIH0sIHRlbXBsYXRlU2VsZWN0b3IsIGhhbmRsZUNhcmRDbGljaykge1xyXG4gICAgdGhpcy5fbmFtZSA9IG5hbWU7XHJcbiAgICB0aGlzLl9saW5rID0gbGluaztcclxuICAgIHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IgPSB0ZW1wbGF0ZVNlbGVjdG9yO1xyXG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xyXG4gIH1cclxuXHJcbiAgX2dldFRlbXBsYXRlKCkge1xyXG4gICAgcmV0dXJuIGRvY3VtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IpXHJcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudFwiKVxyXG4gICAgICAuY2xvbmVOb2RlKHRydWUpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUltYWdlQ2xpY2soZXZ0KSB7XHJcbiAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayhldnQudGFyZ2V0LnNyYywgdGhpcy5fbmFtZSk7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRGVsZXRlQ2xpY2soKSB7XHJcbiAgICB0aGlzLl9lbGVtZW50LnJlbW92ZSgpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUxpa2VDbGljayhldnQpIHtcclxuICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgZXZ0LnRhcmdldC5jbGFzc0xpc3QudG9nZ2xlKFwiZWxlbWVudF9fbGlrZV9hY3RpdmVcIik7XHJcbiAgfVxyXG5cclxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9pbWFnZUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+XHJcbiAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2soZXZ0KVxyXG4gICAgKTtcclxuXHJcbiAgICB0aGlzLl9kZWxldGVFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9oYW5kbGVEZWxldGVDbGljaygpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGhpcy5fbGlrZUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHRoaXMuX2hhbmRsZUxpa2VDbGljayk7XHJcbiAgfVxyXG5cclxuICBnZXRDYXJkKCkge1xyXG4gICAgdGhpcy5fZWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XHJcblxyXG4gICAgdGhpcy5faW1hZ2VFbGVtZW50ID0gdGhpcy5fZWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2ltYWdlXCIpO1xyXG4gICAgdGhpcy5fbmFtZUVsZW1lbnQgPSB0aGlzLl9lbGVtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKFwiLmVsZW1lbnRfX2JveFwiKVxyXG4gICAgICAucXVlcnlTZWxlY3RvcihcIi5lbGVtZW50X19uYW1lXCIpO1xyXG4gICAgdGhpcy5fZGVsZXRlRWxlbWVudCA9IHRoaXMuX2VsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgXCIuZWxlbWVudF9fZGVsZXRlLWJ1dHRvblwiXHJcbiAgICApO1xyXG4gICAgdGhpcy5fbGlrZUVsZW1lbnQgPSB0aGlzLl9lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWxlbWVudF9fbGlrZVwiKTtcclxuXHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAgIHRoaXMuX2ltYWdlRWxlbWVudC5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgdGhpcy5faW1hZ2VFbGVtZW50LmFsdCA9IHRoaXMuX25hbWU7XHJcbiAgICB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XHJcbiAgICByZXR1cm4gdGhpcy5fZWxlbWVudDtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3Ioc2V0dGluZ3MsIGZvcm1FbGVtZW50KSB7XHJcbiAgICB0aGlzLl9mb3JtU2VsZWN0b3IgPSBzZXR0aW5ncy5mb3JtU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gc2V0dGluZ3MuaW5wdXRTZWxlY3RvcjtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IHNldHRpbmdzLmlucHV0RXJyb3JDbGFzcztcclxuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBzZXR0aW5ncy5lcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQgPSBmb3JtRWxlbWVudDtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvclxyXG4gICAgKTtcclxuICB9XHJcblxyXG4gIF9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGVycm9yTWVzc2FnZSkge1xyXG4gICAgdGhpcy5fZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybUVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuICAgICAgYC4ke2lucHV0RWxlbWVudC5pZH0tZXJyb3JgXHJcbiAgICApO1xyXG4gICAgdGhpcy5fZXJyb3JFbGVtZW50LnRleHRDb250ZW50ID0gZXJyb3JNZXNzYWdlO1xyXG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5wdXRFcnJvckNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2Vycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm1FbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYFxyXG4gICAgKTtcclxuICAgIHRoaXMuX2Vycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgZGlzYWJsZUJ1dHRvbigpIHtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX2VuYWJsZUJ1dHRvbigpIHtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICB9XHJcblxyXG4gIF9jaGVja0lmVmFsaWQoaW5wdXRFbGVtZW50KSB7XHJcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dEVsZW1lbnQsIGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX2NoZWNrSWZGb3JtVmFsaWQoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5faW5wdXRzTGlzdC5ldmVyeSgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIHJldHVybiBpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQgJiYgaW5wdXRFbGVtZW50LnZhbHVlICE9PSBcIlwiO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBfdG9nZ2xlU3VibWl0QnRuU3RhdGUoKSB7XHJcbiAgICBpZiAodGhpcy5fY2hlY2tJZkZvcm1WYWxpZCgpKSB7XHJcbiAgICAgIHRoaXMuX2VuYWJsZUJ1dHRvbigpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5kaXNhYmxlQnV0dG9uKCk7XHJcbiAgICB9XHJcbiAgfVxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2lucHV0c0xpc3QgPSBBcnJheS5mcm9tKFxyXG4gICAgICB0aGlzLl9mb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpXHJcbiAgICApO1xyXG5cclxuICAgIHRoaXMuX2lucHV0c0xpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZVN1Ym1pdEJ0blN0YXRlKCk7XHJcbiAgICAgICAgdGhpcy5fY2hlY2tJZlZhbGlkKGlucHV0RWxlbWVudCk7XHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fZm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXZ0KSA9PiB7XHJcbiAgICAgIGV2dC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUVzY0Nsb3NlID0gKGV2dCkgPT4ge1xyXG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgdGhpcy5jbG9zZVBvcHVwKCk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgY2xvc2VQb3B1cCgpIHtcclxuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoXCJwb3B1cF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgICB0aGlzLl9wb3B1cC5yZW1vdmVFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlT3ZlcmxheUNsaWNrKTtcclxuICB9XHJcblxyXG4gIG9wZW5Qb3B1cCgpIHtcclxuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoXCJwb3B1cF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgdGhpcy5faGFuZGxlT3ZlcmxheUNsaWNrKTtcclxuICB9XHJcblxyXG4gIF9oYW5kbGVPdmVybGF5Q2xpY2sgPSAoZXZ0KSA9PiB7XHJcbiAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJwb3B1cFwiKSkge1xyXG4gICAgICB0aGlzLmNsb3NlUG9wdXAoKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBfYWRkQ2xvc2VPbkNsaWNrRXZlbnQoKSB7XHJcbiAgICB0aGlzLl9jbG9zZUJ0biA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Nsb3NlXCIpO1xyXG4gICAgdGhpcy5fY2xvc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+IHtcclxuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHRoaXMuY2xvc2VQb3B1cCgpO1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2FkZENsb3NlT25DbGlja0V2ZW50KCk7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVGb3JtU3VibWl0KSB7XHJcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcclxuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xyXG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1cIik7XHJcbiAgfVxyXG5cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICAvLyBHZXQgYWxsIGZpZWxkIGVsZW1lbnRzXHJcblxyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvckFsbChcIi5wb3B1cF9faW5wdXRcIik7XHJcblxyXG4gICAgLy8gQ3JlYXRlIGFuIGVtcHR5IG9iamVjdFxyXG4gICAgdGhpcy5fZm9ybVZhbHVlcyA9IHt9O1xyXG5cclxuICAgIC8vIEFkZCB0aGUgdmFsdWVzIG9mIHRoZSBmaWVsZHMgdG8gdGhpcyBvYmplY3RcclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgICB0aGlzLl9mb3JtVmFsdWVzW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XHJcbiAgICB9KTtcclxuXHJcbiAgICAvLyBSZXR1cm4gdGhlIHZhbHVlcyBvYmplY3RcclxuICAgIHJldHVybiB0aGlzLl9mb3JtVmFsdWVzO1xyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldnQpID0+IHtcclxuICAgICAgLy8gY2FsbCBoYW5kbGVGb3JtU3VibWl0IGFuZCBwYXNzIHRoZSByZXN1bHQgb2YgZ2V0SW5wdXRWYWx1ZXMoKVxyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgY2xvc2VQb3B1cCgpIHtcclxuICAgIHN1cGVyLmNsb3NlUG9wdXAoKTtcclxuICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcclxuICB9XHJcbn1cclxuIiwiY29uc3QgcHJvZmlsZUVkaXRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2VkaXQtYnV0dG9uXCIpO1xyXG5jb25zdCBwcm9maWxlQWRkQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnV0dG9uXCIpO1xyXG5cclxuY29uc3QgcHJvZmlsZUlucHV0TmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2lucHV0X3R5cGVfbmFtZVwiKTtcclxuY29uc3QgcHJvZmlsZUlucHV0SG9iYnkgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19pbnB1dF90eXBlX2hvYmJ5XCIpO1xyXG5cclxuY29uc3QgcHJvZmlsZVBvcHVwRm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX2Zvcm1fdHlwZV9wcm9maWxlXCIpO1xyXG5jb25zdCBjYXJkUG9wdXBGb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wb3B1cF9fZm9ybV90eXBlX2NhcmRcIik7XHJcblxyXG5jb25zdCBwcm9maWxlTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fbmFtZVwiKTtcclxuY29uc3QgcHJvZmlsZUludGVyZXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19pbnRlcmVzdFwiKTtcclxuXHJcbmNvbnN0IGluaXRpYWxDYXJkcyA9IFtcclxuICB7XHJcbiAgICBuYW1lOiBcIllvc2VtaXRlIFZhbGxleVwiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS95b3NlbWl0ZS5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiTGFrZSBMb3Vpc2VcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9jb2RlLnMzLnlhbmRleC5uZXQvd2ViLWNvZGUvbGFrZS1sb3Vpc2UuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIkJhbGQgTW91bnRhaW5zXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYXRlbWFyXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vY29kZS5zMy55YW5kZXgubmV0L3dlYi1jb2RlL2xhdGVtYXIuanBnXCIsXHJcbiAgfSxcclxuICB7XHJcbiAgICBuYW1lOiBcIlZhbm9pc2UgTmF0aW9uYWwgUGFya1wiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS92YW5vaXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWdvIGRpIEJyYWllc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL2NvZGUuczMueWFuZGV4Lm5ldC93ZWItY29kZS9sYWdvLmpwZ1wiLFxyXG4gIH0sXHJcbl07XHJcblxyXG4vLyBzZXR0aW5ncyBmb3IgdmFsaWRhdGlvblxyXG5jb25zdCBzZXR0aW5ncyA9IHtcclxuICBmb3JtU2VsZWN0b3I6IFwiLnBvcHVwX19mb3JtXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIucG9wdXBfX2lucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLnBvcHVwX19idXR0b25cIixcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcInBvcHVwX19idXR0b25fZGlzYWJsZWRcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwicG9wdXBfX2lucHV0X3R5cGVfZXJyb3JcIixcclxuICBlcnJvckNsYXNzOiBcInBvcHVwX19lcnJvcl92aXNpYmxlXCIsXHJcbn07XHJcblxyXG5leHBvcnQge1xyXG4gIHByb2ZpbGVJbnB1dE5hbWUsXHJcbiAgcHJvZmlsZUlucHV0SG9iYnksXHJcbiAgY2FyZFBvcHVwRm9ybSxcclxuICBwcm9maWxlUG9wdXBGb3JtLFxyXG4gIGluaXRpYWxDYXJkcyxcclxuICBwcm9maWxlQWRkQnRuLFxyXG4gIHByb2ZpbGVFZGl0QnRuLFxyXG4gIHByb2ZpbGVOYW1lLFxyXG4gIHByb2ZpbGVJbnRlcmVzdCxcclxuICBzZXR0aW5ncyxcclxufTtcclxuIiwiaW1wb3J0IFwiLi9pbmRleC5jc3NcIjtcclxuXHJcbmltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcclxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qc1wiO1xyXG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzXCI7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xyXG5pbXBvcnQge1xyXG4gIHByb2ZpbGVJbnB1dE5hbWUsXHJcbiAgcHJvZmlsZUlucHV0SG9iYnksXHJcbiAgcHJvZmlsZUFkZEJ0bixcclxuICBwcm9maWxlUG9wdXBGb3JtLFxyXG4gIHByb2ZpbGVFZGl0QnRuLFxyXG4gIGNhcmRQb3B1cEZvcm0sXHJcbiAgaW5pdGlhbENhcmRzLFxyXG4gIHNldHRpbmdzLFxyXG59IGZyb20gXCIuLi91dGlscy9jb25zdGFudHMuanNcIjtcclxuXHJcbi8vIHVzZXJJbmZvXHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKHtcclxuICB1c2VyTmFtZVNlbGVjdG9yOiBcIi5wcm9maWxlX19uYW1lXCIsXHJcbiAgdXNlckpvYlNlbGVjdG9yOiBcIi5wcm9maWxlX19pbnRlcmVzdFwiLFxyXG59KTtcclxuXHJcbi8vIGNhcmQgd2l0aCBpbWFnZSBwb3B1cCBpbnN0YW5jZVxyXG5jb25zdCBjYXJkSW1hZ2VQb3B1cCA9IG5ldyBQb3B1cFdpdGhJbWFnZShcIi5wb3B1cF90eXBlX2ltYWdlXCIpO1xyXG5jYXJkSW1hZ2VQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuLy8gZWxlbWVudHMgc2VjdGlvbiBpbnN0YW5jZVxyXG5jb25zdCBlbGVtZW50c1NlY3Rpb24gPSBuZXcgU2VjdGlvbihcclxuICB7XHJcbiAgICBpdGVtczogaW5pdGlhbENhcmRzLFxyXG4gICAgcmVuZGVyZXI6IChjYXJkSXRlbSkgPT4ge1xyXG4gICAgICByZW5kZXJDYXJkKGNhcmRJdGVtKTtcclxuICAgIH0sXHJcbiAgfSxcclxuICBcIi5lbGVtZW50c1wiXHJcbik7XHJcbi8vIHRvIGFkZCBtYXJrdXAgdG8gdGhlIGRvbVxyXG5lbGVtZW50c1NlY3Rpb24ucmVuZGVySXRlbXMoKTtcclxuXHJcbi8vIGNhcmQgcG9wdXAgaW5zdGFuY2Ugb2YgdGhlIFBvcHVwV2l0aEZvcm0gY2xhc3NcclxuY29uc3QgY2FyZFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIucG9wdXBfdHlwZV9jYXJkXCIsIGhhbmRsZUNhcmRGb3JtU3VibWl0KTtcclxuY2FyZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4vLyBwcm9maWxlIHBvcHVwIGluc3RhbmNlIG9mIHRoZSBQb3B1cFdpdGhGb3JtIGNsYXNzXHJcbmNvbnN0IHByb2ZpbGVQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxyXG4gIFwiLnBvcHVwX3R5cGVfcHJvZmlsZVwiLFxyXG4gIGhhbmRsZVByb2ZpbGVGb3JtU3VibWl0XHJcbik7XHJcbnByb2ZpbGVQb3B1cC5zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuLy8gY2FyZCBmb3JtIHZhbGlkYXRvclxyXG5jb25zdCBjYXJkRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHNldHRpbmdzLCBjYXJkUG9wdXBGb3JtKTtcclxuY2FyZEZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuLy8gcHJvZmlsZSBmb3JtIHZhbGlkYXRvclxyXG5jb25zdCBwcm9maWxlRm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKHNldHRpbmdzLCBwcm9maWxlUG9wdXBGb3JtKTtcclxucHJvZmlsZUZvcm1WYWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xyXG5cclxuLy8gYWRkIGEgY2xpY2sgZXZlbnQgbGlzdGVuZXIgZm9yIHRoZSBhZGQgYnV0dG9uXHJcbnByb2ZpbGVBZGRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBjYXJkUG9wdXAub3BlblBvcHVwKCk7XHJcbiAgY2FyZEZvcm1WYWxpZGF0b3IuZGlzYWJsZUJ1dHRvbigpO1xyXG59KTtcclxuXHJcbi8vIGFkZCBhIGNsaWNrIGV2ZW50IGxpc3RlbmVyIGZvciB0aGUgZWRpdCBidXR0b25cclxucHJvZmlsZUVkaXRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBwcm9maWxlUG9wdXAub3BlblBvcHVwKCk7XHJcbiAgZmlsbFByb2ZpbGVJbnB1dHMoKTtcclxufSk7XHJcblxyXG4vLyBjYXJkIGZvcm0gc3VibWl0IGhhbmRsZXJcclxuZnVuY3Rpb24gaGFuZGxlQ2FyZEZvcm1TdWJtaXQoZGF0YSkge1xyXG4gIGNvbnN0IHsgdGl0bGUsIGltYWdlX2xpbmsgfSA9IGRhdGE7XHJcbiAgY2FyZFBvcHVwLmNsb3NlUG9wdXAoKTtcclxuICByZW5kZXJDYXJkKHsgbmFtZTogdGl0bGUsIGxpbms6IGltYWdlX2xpbmsgfSk7XHJcbn1cclxuXHJcbi8vIHByb2ZpbGUgZm9ybSBzdWJtaXQgaGFuZGxlclxyXG5mdW5jdGlvbiBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdChkYXRhKSB7XHJcbiAgdXNlckluZm8uc2V0VXNlckluZm8oZGF0YS5uYW1lLCBkYXRhLmhvYmJ5KTtcclxuICBwcm9maWxlUG9wdXAuY2xvc2VQb3B1cCgpO1xyXG59XHJcblxyXG4vLyBjYXJkIGNsaWNrIGhhbmRsZXJcclxuZnVuY3Rpb24gaGFuZGxlQ2FyZENsaWNrKHNyYywgbmFtZSkge1xyXG4gIGNhcmRJbWFnZVBvcHVwLm9wZW5Qb3B1cChzcmMsIG5hbWUpO1xyXG59XHJcblxyXG4vLyByZW5kZXJpbmcgYSBjYXJkXHJcbmZ1bmN0aW9uIHJlbmRlckNhcmQoY2FyZERhdGEpIHtcclxuICBjb25zdCBjYXJkID0gbmV3IENhcmQoY2FyZERhdGEsIFwiI2VsZW1lbnRcIiwgaGFuZGxlQ2FyZENsaWNrKTtcclxuICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmQuZ2V0Q2FyZCgpO1xyXG4gIGVsZW1lbnRzU2VjdGlvbi5hZGRJdGVtKGNhcmRFbGVtZW50KTtcclxufVxyXG5cclxuLy8gYSBmdW5jdGlvbiB0byBmaWxsIHRoZSBpbnB1dHMgYWZ0ZXIgcmVzZXR0aW5nIHRoZSBwcm9maWxlIGZvcm1cclxuZnVuY3Rpb24gZmlsbFByb2ZpbGVJbnB1dHMoKSB7XHJcbiAgY29uc3QgeyB1c2VyTmFtZSwgdXNlckpvYiB9ID0gdXNlckluZm8uZ2V0VXNlckluZm8oKTtcclxuICBwcm9maWxlSW5wdXROYW1lLnZhbHVlID0gdXNlck5hbWU7XHJcbiAgcHJvZmlsZUlucHV0SG9iYnkudmFsdWUgPSB1c2VySm9iO1xyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcih7IHVzZXJOYW1lU2VsZWN0b3IsIHVzZXJKb2JTZWxlY3RvciB9KSB7XHJcbiAgICB0aGlzLl91c2VyTmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlck5hbWVTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl91c2VySm9iID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih1c2VySm9iU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICB1c2VyTmFtZTogdGhpcy5fdXNlck5hbWUudGV4dENvbnRlbnQsXHJcbiAgICAgIHVzZXJKb2I6IHRoaXMuX3VzZXJKb2IudGV4dENvbnRlbnQsXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8obmFtZSwgam9iKSB7XHJcbiAgICB0aGlzLl91c2VyTmFtZS50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgICB0aGlzLl91c2VySm9iLnRleHRDb250ZW50ID0gam9iO1xyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgY2xvc2VQb3B1cCgpIHtcclxuICAgIHN1cGVyLmNsb3NlUG9wdXAoKTtcclxuICB9XHJcblxyXG4gIG9wZW5Qb3B1cChzcmMsIG5hbWUpIHtcclxuICAgIHN1cGVyLm9wZW5Qb3B1cCgpO1xyXG4gICAgdGhpcy5fYWRkSW1hZ2VBbmRDYXB0aW9uKHNyYywgbmFtZSk7XHJcbiAgfVxyXG5cclxuICBfYWRkSW1hZ2VBbmRDYXB0aW9uKHNyYywgbmFtZSkge1xyXG4gICAgdGhpcy5fcG9wdXBJbWFnZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnBvcHVwX19jYXJkLWltYWdlXCIpO1xyXG4gICAgdGhpcy5fcG9wdXBOYW1lRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucG9wdXBfX25hbWVcIik7XHJcbiAgICB0aGlzLl9wb3B1cEltYWdlRWxlbWVudC5zcmMgPSBzcmM7XHJcbiAgICB0aGlzLl9wb3B1cEltYWdlRWxlbWVudC5hbHQgPSBuYW1lO1xyXG4gICAgdGhpcy5fcG9wdXBOYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IG5hbWU7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBQb3B1cFdpdGhJbWFnZTtcclxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7XHJcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xyXG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7XHJcbiAgfVxyXG5cclxuICBhZGRJdGVtKGVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGVsZW1lbnQpO1xyXG4gIH1cclxuXHJcbiAgcmVuZGVySXRlbXMoKSB7XHJcbiAgICB0aGlzLl9pdGVtcy5mb3JFYWNoKChpdGVtKSA9PiB7XHJcbiAgICAgIHRoaXMuX3JlbmRlcmVyKGl0ZW0pO1xyXG4gICAgfSk7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJDYXJkIiwiY29uc3RydWN0b3IiLCJ0ZW1wbGF0ZVNlbGVjdG9yIiwiaGFuZGxlQ2FyZENsaWNrIiwibmFtZSIsImxpbmsiLCJ0aGlzIiwiX25hbWUiLCJfbGluayIsIl90ZW1wbGF0ZVNlbGVjdG9yIiwiX2hhbmRsZUNhcmRDbGljayIsIl9nZXRUZW1wbGF0ZSIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfaGFuZGxlSW1hZ2VDbGljayIsImV2dCIsInByZXZlbnREZWZhdWx0IiwidGFyZ2V0Iiwic3JjIiwiX2hhbmRsZURlbGV0ZUNsaWNrIiwiX2VsZW1lbnQiLCJyZW1vdmUiLCJfaGFuZGxlTGlrZUNsaWNrIiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2ltYWdlRWxlbWVudCIsImFkZEV2ZW50TGlzdGVuZXIiLCJfZGVsZXRlRWxlbWVudCIsIl9saWtlRWxlbWVudCIsImdldENhcmQiLCJfbmFtZUVsZW1lbnQiLCJhbHQiLCJ0ZXh0Q29udGVudCIsIkZvcm1WYWxpZGF0b3IiLCJzZXR0aW5ncyIsImZvcm1FbGVtZW50IiwiX2Zvcm1TZWxlY3RvciIsImZvcm1TZWxlY3RvciIsIl9pbnB1dFNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9mb3JtRWxlbWVudCIsIl9idXR0b25FbGVtZW50IiwiX3Nob3dJbnB1dEVycm9yIiwiaW5wdXRFbGVtZW50IiwiZXJyb3JNZXNzYWdlIiwiX2Vycm9yRWxlbWVudCIsImlkIiwiYWRkIiwiX2hpZGVJbnB1dEVycm9yIiwiZGlzYWJsZUJ1dHRvbiIsImRpc2FibGVkIiwiX2VuYWJsZUJ1dHRvbiIsIl9jaGVja0lmVmFsaWQiLCJ2YWxpZGl0eSIsInZhbGlkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfY2hlY2tJZkZvcm1WYWxpZCIsIl9pbnB1dHNMaXN0IiwiZXZlcnkiLCJ2YWx1ZSIsIl90b2dnbGVTdWJtaXRCdG5TdGF0ZSIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiZW5hYmxlVmFsaWRhdGlvbiIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsImtleSIsImNsb3NlUG9wdXAiLCJjb250YWlucyIsIl9wb3B1cCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJfaGFuZGxlRXNjQ2xvc2UiLCJfaGFuZGxlT3ZlcmxheUNsaWNrIiwib3BlblBvcHVwIiwiX2FkZENsb3NlT25DbGlja0V2ZW50IiwiX2Nsb3NlQnRuIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlRm9ybVN1Ym1pdCIsInN1cGVyIiwiX2hhbmRsZUZvcm1TdWJtaXQiLCJfZm9ybSIsIl9nZXRJbnB1dFZhbHVlcyIsIl9pbnB1dExpc3QiLCJfZm9ybVZhbHVlcyIsImlucHV0IiwicmVzZXQiLCJwcm9maWxlRWRpdEJ0biIsInByb2ZpbGVBZGRCdG4iLCJwcm9maWxlSW5wdXROYW1lIiwicHJvZmlsZUlucHV0SG9iYnkiLCJwcm9maWxlUG9wdXBGb3JtIiwiY2FyZFBvcHVwRm9ybSIsInVzZXJJbmZvIiwidXNlck5hbWVTZWxlY3RvciIsInVzZXJKb2JTZWxlY3RvciIsIl91c2VyTmFtZSIsIl91c2VySm9iIiwiZ2V0VXNlckluZm8iLCJ1c2VyTmFtZSIsInVzZXJKb2IiLCJzZXRVc2VySW5mbyIsImpvYiIsImNhcmRJbWFnZVBvcHVwIiwiX2FkZEltYWdlQW5kQ2FwdGlvbiIsIl9wb3B1cEltYWdlRWxlbWVudCIsIl9wb3B1cE5hbWVFbGVtZW50IiwiZWxlbWVudHNTZWN0aW9uIiwiY29udGFpbmVyU2VsZWN0b3IiLCJpdGVtcyIsInJlbmRlcmVyIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsImFkZEl0ZW0iLCJlbGVtZW50IiwicHJlcGVuZCIsInJlbmRlckl0ZW1zIiwiaXRlbSIsImNhcmRJdGVtIiwicmVuZGVyQ2FyZCIsImNhcmRQb3B1cCIsImRhdGEiLCJ0aXRsZSIsImltYWdlX2xpbmsiLCJwcm9maWxlUG9wdXAiLCJob2JieSIsImNhcmRGb3JtVmFsaWRhdG9yIiwiY2FyZERhdGEiLCJjYXJkRWxlbWVudCIsImZpbGxQcm9maWxlSW5wdXRzIl0sInNvdXJjZVJvb3QiOiIifQ==